<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fancy Text Converter (Unicode Safe)</title>
  <style>
    body {
      font-family: system-ui, -apple-system, Roboto, "Segoe UI", Arial;
      padding: 18px; background:#121212; color:#eaeaea;
    }
    h1 { font-size:25px; margin:0 0 10px; color:#fff; }
    .box { display:flex; gap:12px; flex-direction:column; max-width:900px; margin:0 auto; }
    textarea {
      width:100%; height:120px; padding:10px; font-size:16px;
      border-radius:8px; border:1px solid #333; resize:vertical;
      background:#1e1e1e; color:#eaeaea;
    }
    pre#out {
      min-height:120px;
      max-height:250px;
      overflow:auto;
      white-space:pre-wrap;
      word-wrap:break-word;
      padding:10px;
      border-radius:8px;
      border:1px solid #333;
      background:#1e1e1e;
      font-size:16px;
      color:#eaeaea;
      user-select: text;
    }
    .row { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    button, select {
      padding:8px 12px; border-radius:8px;
      border:1px solid #444; background:#2a2a2a;
      color:#eaeaea; cursor:pointer;
    }
    button:hover, select:hover { background:#3a3a3a; }
    label, small { color:#bbb; }

    .smallcaps {
      font-variant: small-caps;
    }

    /* New link styling */
    .title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .title-row a {
      font-size: 14px;
      color: #4da6ff;
      text-decoration: none;
    }
    .title-row a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="box">
    <div class="title-row">
      <h1>Fancy Text Converter</h1>
      <a href="https://revivalhubministry.github.io/TextFormatter/">Go Back</a>
    </div>

    <label><strong>Choose Style</strong></label>
    <div style="display:flex; align-items:center; gap:6px;">
      <select id="style">
        <optgroup label="Basic">
          <option value="normal">Normal</option>
          <option value="smallcaps">Small Caps (CSS)</option>
          <option value="customSmallCaps">Custom Small Caps (ᴀʙᴄᴅ...)</option>
          <option value="underlined">Underlined (A̲B̲...)</option>
        </optgroup>
        <optgroup label="Math Styles">
          <option value="bold">Bold (𝐀𝐁𝐂...)</option>
          <option value="italic">Italic (𝐴𝐵𝐶...)</option>
          <option value="bolditalic">Bold Italic (𝑨𝑩𝑪...)</option>
          <option value="sans">Sans-Serif (𝖠𝖡𝖢...)</option>
          <option value="sansbold">Sans-Serif Bold (𝗔𝗕𝗖...)</option>
          <option value="sansbolditalic">Sans-Serif Bold Italic (𝘼𝘽𝘾...)</option>
          <option value="monospace">Monospace (𝙰𝙱𝙲...)</option>
          <option value="script">Script (𝒜ℬ𝒞...)</option>
          <option value="fraktur">Fraktur (𝔄𝔅ℭ...)</option>
          <option value="doublestruck">Double-Struck (𝔸𝔹ℂ...)</option>
        </optgroup>
        <optgroup label="Decorative">
          <option value="fullwidth">Fullwidth (ＡＢＣ...)</option>
          <option value="circled">Circled (ⒶⒷⒸ...)</option>
          <option value="blackcircled">Black Circled (🄰🄱🄲...)</option>
        </optgroup>
      </select>
      <button id="prevStyle">⬆</button>
      <button id="nextStyle">⬇</button>
    </div>

    <div class="row">
      <button id="copy">Copy Output</button>
      <button id="clear">Clear</button>
      <label for="copyMode" style="margin-left:6px; color:#bbb;">Copy as:</label>
      <select id="copyMode" title="Copy format">
        <option value="unicode" selected>Unicode Small-Caps</option>
        <option value="uppercase">Uppercase (compat)</option>
      </select>
    </div>
    
    <label><strong>Input</strong></label>
    <textarea id="input" placeholder="Type here..."></textarea>
    
    <label><strong>Output</strong></label>
    <pre id="out" aria-live="polite"></pre>
  </div>


  <script>
    const ascii = 'abcdefghijklmnopqrstuvwxyz';
    const ASCII_UPPER = ascii.toUpperCase();

    const styles = {
      normal: { upper: ASCII_UPPER.split(''), lower: ascii.split('') },
      underlined: {
        upper: ASCII_UPPER.split('').map(ch => ch + '\u0332'),
        lower: ascii.split('').map(ch => ch + '\u0332')
      },
      bold: {
        upper: [..."𝐀𝐁𝐂𝐃𝐄𝐅𝐆𝐇𝐈𝐉𝐊𝐋𝐌𝐍𝐎𝐏𝐐𝐑𝐒𝐓𝐔𝐕𝐖𝐗𝐘𝐙"],
        lower: [..."𝐚𝐛𝐜𝐝𝐞𝐟𝐠𝐡𝐢𝐣𝐤𝐥𝐦𝐧𝐨𝐩𝐪𝐫𝐬𝐭𝐮𝐯𝐰𝐱𝐲𝐳"]
      },
      italic: {
        upper: [..."𝐴𝐵𝐶𝐷𝐸𝐹𝐺𝐻𝐼𝐽𝐾𝐿𝑀𝑁𝑂𝑃𝑄𝑅𝑆𝑇𝑈𝑉𝑊𝑋𝑌𝑍"],
        lower: [..."𝑎𝑏𝑐𝑑𝑒𝑓𝑔𝒉𝒊𝒋𝓀𝓁𝓂𝓃𝑜𝓅𝓆𝓇𝓈𝓉𝓊𝓋𝓌𝓍𝓎𝓏"]
      },
      bolditalic: {
        upper: [..."𝑨𝑩𝑪𝑫𝑬𝑭𝑮𝑯𝑰𝑱𝑲𝑳𝑴𝑵𝑶𝑷𝑸𝑹𝑺𝑻𝑼𝑽𝑾𝑿𝒀𝒁"],
        lower: [..."𝒂𝒃𝒄𝒅𝒆𝒇𝒈𝒉𝒊𝒋𝒌𝒍𝒎𝒏𝒐𝒑𝒒𝒓𝒔𝒕𝒖𝒗𝒘𝒙𝒚𝒛"]
      },
      sans: {
        upper: [..."𝖠𝖡𝖢𝖣𝖤𝖥𝖦𝖧𝖨𝖩𝖪𝖫𝖬𝖭𝖮𝖯𝖰𝖱𝖲𝖳𝖴𝖵𝖶𝖷𝖸𝖹"],
        lower: [..."𝖺𝖻𝖼𝖽𝖾𝖿𝗀𝗁𝗂𝗃𝗄𝗅𝗆𝗇𝗈𝗉𝗊𝗋𝗌𝗍𝗎𝗏𝗐𝗑𝗒𝗓"]
      },
      sansbold: {
        upper: [..."𝗔𝗕𝗖𝗗𝗘𝗙𝗚𝗛𝗜𝗝𝗞𝗟𝗠𝗡𝗢𝗣𝗤𝗥𝗦𝗧𝗨𝗩𝗪𝗫𝗬𝗭"],
        lower: [..."𝗮𝗯𝗰𝗱𝗲𝗳𝗴𝗵𝗶𝗷𝗸𝗹𝗺𝗻𝗼𝗽𝗾𝗿𝘀𝘁𝘶𝘃𝘄𝘅𝘺𝘇"]
      },
      sansbolditalic: {
        upper: [..."𝘼𝘽𝘾𝘿𝙀𝙁𝙂𝙃𝙄𝙅𝙆𝙇𝙈𝙉𝙊𝙋𝙌𝙍𝙎𝙏𝙐𝙑𝙒𝙓𝙔𝙕"],
        lower: [..."𝙖𝙗𝙘𝙙𝙚𝙛𝙜𝙝𝙞𝙟𝙠𝙡𝙢𝙣𝙤𝙥𝙦𝙧𝙨𝙩𝙪𝙫𝙬𝙭𝙮𝙯"]
      },
      monospace: {
        upper: [..."𝙰𝙱𝙲𝙳𝙴𝙵𝙂𝙃𝙸𝙹𝙺𝙻𝙼𝙉𝙊𝙿𝚀𝚁𝚂𝚃𝚄𝚅𝚆𝚇𝚈𝚉"],
        lower: [..."𝚊𝚋𝚌𝚍𝚎𝚏𝚐𝚑𝚒𝚓𝚔𝚕𝚖𝚗𝚘𝚙𝚚𝚛𝚜𝚝𝚞𝚟𝚠𝚡𝚢𝚣"]
      },
      script: {
        upper: [..."𝒜ℬ𝒞𝒟ℰℱ𝒢ℋℐ𝒥𝒦ℒℳ𝒩𝒪𝒫𝒬ℛ𝒮𝒯𝒰𝒱𝒲𝒳𝒴𝒵"],
        lower: [..."𝒶𝒷𝒸𝒹ℯ𝒻ℊ𝒽𝒾𝒿𝓀𝓁𝓂𝓃ℴ𝓅𝓆𝓇𝓈𝓉𝓊𝓋𝓌𝓍𝓎𝓏"]
      },
      fraktur: {
        upper: [..."𝔄𝔅ℭ𝔇𝔈𝔉𝔊ℌℑ𝔍𝔎𝔏𝔐𝔑𝔒𝔓𝔔ℜ𝔖𝔗𝔘𝔙𝔚𝔛𝔜ℨ"],
        lower: [..."𝔞𝔟𝔠𝔡𝔢𝔣𝔤𝔥𝔦𝔧𝔨𝔩𝔪𝔫𝔬𝔭𝔮𝔯𝔰𝔱𝔲𝔳𝔴𝔵𝔶𝔷"]
      },
      doublestruck: {
        upper: [..."𝔸𝔹ℂ𝔻𝔼𝔽𝔾ℍ𝕀𝕁𝕂𝕃𝕄ℕ𝕆ℙℚℝ𝕊𝕋𝕌𝕍𝕎𝕏𝕐ℤ"],
        lower: [..."𝕒𝕓𝕔𝕕𝕖𝕗𝕘𝕙𝕚𝕛𝕜𝕝𝕞𝕟𝕠𝕡𝕢𝕣𝕤𝕥𝕦𝕧𝕨𝕩𝕪𝕫"]
      },
      fullwidth: {
        upper: [..."ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ"],
        lower: [..."ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ"]
      },
      circled: {
        upper: [..."ⒶⒷⒸⒹⒺⒻⒼⒽⒾⒿⓀⓁⓂⓃⓄⓅⓆⓇⓈⓉⓊⓋⓌⓍⓎⓏ"],
        lower: [..."ⓐⓑⓒⓓⓔⓕⓖⓗⓘⓙⓚⓛⓜⓝⓞⓟⓠⓡⓢⓣⓤⓥⓦⓧⓨⓩ"]
      },
      blackcircled: {
        upper: [..."🄰🄱🄲🄳🄴🄵🄶🄷🄸🄹🄺🄻🄼🄽🄾🄿🅀🅁🅂🅃🅄🅅🅆🅇🅈🅉"],
        lower: [..."🄰🄱🄲🄳🄴🄵🄶🄷🄸🄹🄺🄻🄼🄽🄾🄿🅀🅁🅂🅃🅄🅅🅆🅇🅈🅉"] // fallback: no lowercase
      },
      customSmallCaps: {
        upper: [..."ᴀʙᴄᴅᴇꜰɢʜɪᴊᴋʟᴍɴᴏᴩQʀꜱᴛᴜᴠᴡxYᴢ"],
        lower: [..."ᴀʙᴄᴅᴇꜰɢʜɪᴊᴋʟᴍɴᴏᴩqʀꜱᴛᴜᴠᴡxyᴢ"]
      }
    };

    function buildMap(style) {
      if (style === "smallcaps") return null;
      if (!styles[style]) {
        console.warn(`Style "${style}" not defined in styles object`);
        return null;
      }
      const { lower, upper } = styles[style];
      const map = {};
      for (let i = 0; i < ascii.length; i++) {
        map[ascii[i]] = lower[i] || ascii[i];
        map[ASCII_UPPER[i]] = upper[i] || ASCII_UPPER[i];
      }
      return map;
    }

    function convert(text, style) {
      if (style === "smallcaps") {
        return `<span class="smallcaps">${escapeHtml(text)}</span>`;
      }
      const map = buildMap(style);
      if (!map) return text;
      let result = '';
      for (const ch of text) {
        result += map[ch] !== undefined ? map[ch] : ch;
      }
      return result;
    }

    function escapeHtml(str) {
      return str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    }

    const input = document.getElementById('input');
    const out = document.getElementById('out');
    const copyBtn = document.getElementById('copy');
    const clearBtn = document.getElementById('clear');
    const styleSelect = document.getElementById('style');
    const prevBtn = document.getElementById('prevStyle');
    const nextBtn = document.getElementById('nextStyle');
    const copyMode = document.getElementById('copyMode');

    function updateOutput() {
      const style = styleSelect.value;
      if (style === "smallcaps") {
        out.innerHTML = convert(input.value, style);
      } else {
        out.textContent = convert(input.value, style);
      }
    }

    styleSelect.addEventListener('change', updateOutput);
    input.addEventListener('input', updateOutput);

    prevBtn.addEventListener('click', () => {
      let idx = styleSelect.selectedIndex;
      idx = (idx - 1 + styleSelect.options.length) % styleSelect.options.length;
      styleSelect.selectedIndex = idx;
      updateOutput();
    });

    nextBtn.addEventListener('click', () => {
      let idx = styleSelect.selectedIndex;
      idx = (idx + 1) % styleSelect.options.length;
      styleSelect.selectedIndex = idx;
      updateOutput();
    });

    copyBtn.addEventListener('click', async () => {
      try {
        let textToCopy;
        const style = styleSelect.value;
        if (style === "smallcaps" && copyMode.value === "unicode") {
          textToCopy = input.value.toLowerCase();
        } else if (style === "smallcaps" && copyMode.value === "uppercase") {
          textToCopy = input.value.toUpperCase();
        } else {
          textToCopy = out.textContent || out.innerText;
        }
        if (navigator.clipboard && window.isSecureContext) {
          await navigator.clipboard.writeText(textToCopy);
        } else {
          const temp = document.createElement("textarea");
          temp.value = textToCopy;
          document.body.appendChild(temp);
          temp.select();
          document.execCommand("copy");
          document.body.removeChild(temp);
        }
        copyBtn.textContent = 'Copied!';
        setTimeout(() => copyBtn.textContent = 'Copy Output', 1200);
      } catch (err) {
        alert("Failed to copy: " + err);
      }
    });

    clearBtn.addEventListener('click', () => {
      input.value = '';
      out.textContent = '';
    });

    updateOutput();
  </script>
</body>
</html>
